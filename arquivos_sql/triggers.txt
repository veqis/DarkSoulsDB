CREATE OR REPLACE FUNCTION cura_personagem (nome_personagem VARCHAR)
RETURNS VARCHAR AS $$
BEGIN
	UPDATE estado_personagem 
	SET hp_atual = hp_atual + 10
	WHERE estado_personagem.nome_personagem = cura_personagem.nome_personagem;
	
	RETURN 'Personagem curado.';
END;
$$ LANGUAGE plpgsql;

SELECT cura_personagem ('Knight Solaire');
-------------------------------------------

CREATE TABLE estado_personagem (
  nome_personagem VARCHAR(45) NOT NULL,
  UNIQUE (nome_personagem),
  hp_atual int Not NULL,
  estus_atual int NOT NULL,
  almas_atual int not NULL,
  humanidade_atual int not NULL,
  FOREIGN KEY (nome_personagem) REFERENCES personagens (nome) ON DELETE CASCADE ON UPDATE CASCADE
);

---------------------------------
CREATE OR REPLACE FUNCTION Novo_Personagem()
RETURNS TRIGGER AS $$
BEGIN
	INSERT into estado_personagem 
    VALUES
    (new.nome, new.hp, new.almas);
	RETURN NEW;
END;
$$ LANGUAGE plpgsql;
